{
  "version": "2.0.0",
  "tasks": [
    /* -------------------- Configure -------------------- */
    {
      "label": "Configure GTests",
      "type": "shell",
      "command": "cmake --preset config-gtests-macos",
      "group": { "kind": "build" },
      "problemMatcher": []
    },

    /* ---------------------- Build ---------------------- */
    {
      "label": "Build GTests",
      "type": "shell",
      "command": "cmake --build --preset build-gtests",
      "group": { "kind": "build" },
      "problemMatcher": "$gcc"
    },

    /* ----------------------- Test ---------------------- */
    {
      "label": "Run GTests",
      "type": "shell",
      "command": "ctest --preset gtests",
      "group": { "kind": "test", "isDefault": true },
      "problemMatcher": []
    },

    /* ---------------------- Clean ---------------------- */
    {
      "label": "Clean GTests",
      "type": "shell",
      "command": "cmake --build --preset build-gtests --target clean",
      "problemMatcher": []
    },
    {
      "label": "Clean All",
      "type": "shell",
      "command": "cmake --build --preset build-gtests --target clean",
      "problemMatcher": []
    },

    /* --------------- Convenience: chain ops ----------- */
    {
      "label": "Run All GTests",
      "dependsOrder": "sequence",
      "dependsOn": ["Configure GTests", "Build GTests", "Run GTests"]
    }
  ]
}
